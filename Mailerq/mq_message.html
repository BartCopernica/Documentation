<h1>Structure MQ_Message</h1>
<p>
    This structure is provided for plugin functions that work with message 
    contents. It can be used to both retrieve and update message properties.
    If you use it for <i>updating</i> messages, you should be aware of
    the phase in the SMTP protocol that your plugin is intercepting: it
    is for example pointless to change the envelope address if the
    "MAIL FROM" instruction has already been sent.
</p>
<p>
    All members in this <a href="/documentation/mq_message">MQ_Message</a> 
    structure are private, to interact with this structure, accessor 
    functions have been created.
</p>
<h2>Functions that your plugin can export</h2>
<p>
    A <a href="/documentation/mq_message">MQ_Message</a> pointer is
    passed to your plugin when a message is received on the incoming
    SMTP port, and when it is about to be sent over an outgoing SMTP
    connection. If your plugin implements one of the following 
    functions, it can get access to a message, retrieve information
    from it, or make modifications to it.
</p>
<table>
    <thead>
        <tr>
            <th><nobr>Function name</nobr></th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr valign="top">
            <td><a href="/documentation/mq_smtp_in_message">mq_smtp_in_message()</a></td>
            <td>Called by MailerQ when a message is received on an incoming SMTP connection</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_smtp_out_data">mq_smtp_out_data()</a></td>
            <td>Called by MailerQ right after it has sent the "DATA" command and is about the send MIME data</td>
        </tr>
    </tbody>
</table>
<br/>
<h2>Access to the raw JSON data</h2>
<p>
    The <a href="/documentation/mq_message">MQ_Message</a> structure is 
    essentially just a wrapper around the original JSON data that was loaded
    from RabbitMQ (if your plugin interacts with a message that is going
    to be sent), or a wrapper around the JSON data that is going to be
    published to RabbitmQ (for incoming messages).
</p>
<p>
    Your plugin can get access to the JSON data, and make modifications
    to it.
</p>
<table>
    <thead>
        <tr>
            <th><nobr>Function name</nobr></th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr valign="top">
            <td><a href="/documentation/mq_json">MQ_Json()</a></td>
            <td>Get access to the JSON data of a message</td>
        </tr>
    </tbody>
</table>
<br/>
<h2>Access to derived properties</h2>
<p>
    When a message is being sent, MailerQ copies data from the JSON
    into specific envelope, recipient and mime properties. If you write
    a plugin, you can call any of the following functions to retrieve
    this data, or to overwrite this data.
</p>
<table>
    <thead>
        <tr>
            <th><nobr>Function name</nobr></th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr valign="top">
            <td><a href="/documentation/mq_envelope">MQ_Envelope()</a></td>
            <td>Get access to the envelope address</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_setenvelope">MQ_SetEnvelope()</a></td>
            <td>Set the envelope address</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_recipient">MQ_Recipient()</a></td>
            <td>Get access to the recipient address</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_setrecipient">MQ_SetRecipient()</a></td>
            <td>Set the recipient address</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_mime">MQ_Mime()</a></td>
            <td>Get access to the MIME data</td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_setmime">MQ_SetMime()</a></td>
            <td>Get the MIME data</td>
        </tr>
    </tbody>
</table>
<br/>
