<h1>Function mq_context_initialize</h1>
<p>
    The mq_context_initialize() is an optional function that you can add to your 
    plugin. It is called by MailerQ during startup for each worker thread that is 
    created. This is useful if, for example, you want to set up a database
    connection per thread, or want to do other initialization.
</p>
<p>
    This function can be implemented <i>by the plugin</i> and
    is called by MailerQ when a worker thread starts. If it returns true,
    MailerQ hands over control to your plugin, and your plugin must call one of the 
    functions <a href="/documentation/mq_continue">MQ_Continue()</a>,
    <a href="/documentation/mq_complete">MQ_Complete()</a> or
    <a href="/documentation/mq_retry">MQ_Retry()</a> when it is ready 
    to hand back control to MailerQ.
</p>
<p>
    For more information on how MailerQ plugins can interact with the event
    loop, and how control is passed to and from plugins, see 
    <a href="/documentation/eventloop">the article about the MailerQ event loop</a>.
</p>
<pre class="prettyprint lang-c">
#include &lt;mailerq.h&gt;

/**
 *  This function is called by MailerQ for every worker thread
 *  that is created
 */
MQ_EXPORT bool mq_context_initialize(<a href="/documentation/mq_context">MQ_Context</a> *context) {
    // set up a connection to MySQL
    MYSQL *connection = mysql_init(NULL);

    // TODO: connect here and do other useful stuff

    // store the connection so it can be used in later callbacks
    <a href="/document/mq_setcontextdata">MQ_SetContextData</a>(context, connection);
    
    // return true, MailerQ can stay in control
    return false;
}
</pre>
<p>
    If you allocate memory in this function, you probably also have to add
    a <a href="/documentation/mq_context_cleanup">mq_context_cleanup</a>
    to your plugin.
</p>
