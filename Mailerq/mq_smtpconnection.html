<h1>Structure MQ_SmtpConnection</h1>
<p>
    The <a href="/documentation/mq_smtpconnection">MQ_SmtpConnection</a> 
    structure is passed to all callbacks dealing with SMTP connections.
    It allows your plugin to find out information about the connection,
    and to send data over the connection.
</p>

<h2>Functions that your plugin can export</h2>
<p>
    There is a whole list of functions that your plugin can export
    that deal with connections. For a complete list of functions check
    the <a href="/documentation/plugins">main plugins page</a>. A
    couple of functions are interesting because they are normally
    the first and last functions that MailerQ calls when a connection
    is created and a connection is closed. If your plugin needs to
    run per-connection initialization or cleanup code, it can do so
    by implementing these functions.
</p>
<table>
    <thead>
        <tr>
            <th><nobr>Function name</nobr></th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr valign="top">
            <td><a href="/documentation/mq_smtp_in_connect">mq_smtp_in_connect()</a></td>
            <td>
                Called after an incoming TCP connection is established. This is the 
                first time that the <a href="/documentation/mq_smtpconnection">MQ_SmtpConnection</a>
                is passed to the plugin, and a good place for per-connection initialization
                code.
            </td>
        </tr>
        <tr valign="top">
            <td><a href="/documentation/mq_smtp_in_close">mq_smtp_in_close()</a></td>
            <td>
                Called after an incoming SMTP connection is closed. This is the
                last time that the <a href="/documentation/mq_smtpconnection">MQ_SmtpConnection</a>
                is passed to the plugin. You can use this function for cleanup code.
            </td>
        </tr>
    </tbody>
</table>
<br/>
<p>
    The above functions are only called for <a href="/documentation/mq_smtpconnection">
    MQ_SmtpConnection</a> pointers that represent <i>incoming</i> connections. The MailerQ
    API does not yet have such initialization and cleanup functions for 
    outgoing SMTP connections.
</p>
<h2>Access to connection properties</h2>
<p>
    All members in the <a href="/documentation/mq_smtpconnection">MQ_SmtpConnection</a>
    structure are private. To interact with the structure the following
    accessor functions have been created.
</p>
<table>
    <thead>
        <tr>
            <th>Callable function</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><a href="/documentation/mq_smtpfiledescriptor">MQ_SmtpFileDescriptor()</a></td>
            <td>Retrieve the filedescriptor linked to a connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_smtpsend">MQ_SmtpSend()</a></td>
            <td>Send data over a SMTP connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_smtpauthenticated">MQ_SmtpAuthenticated()</a></td>
            <td>Returns whether this is an authenticated connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_setsmtpauthenticated">MQ_SetSmtpAuthenticated()</a></td>
            <td>Mark a connection as an authenticated connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_smtpsecure">MQ_SmtpSecure()</a></td>
            <td>Returns whether this is a secure TLS connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_smtpdata">MQ_SmtpData()</a></td>
            <td>Retrieve the data that is associated with the SMTP connection</td>
        </tr>
        <tr>
            <td><a href="/documentation/mq_setsmtpdata">MQ_SetSmtpData()</a></td>
            <td>Associated data with the SMTP connection</td>
        </tr>
    </tbody>
</table>
<br/>
